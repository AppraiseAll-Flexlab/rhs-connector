Object.defineProperty(exports,"__esModule",{value:true});exports.sendUnresolvedMail=undefined;var _DBConnect=require("./DBConnect");var _moment=require("moment/moment");var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var lastTiming={};var sendUnresolvedMail=exports.sendUnresolvedMail=function sendUnresolvedMail(_ref){var dbConnect=_ref.dbConnect,error=_ref.error,recepients=_ref.recepients,subject=_ref.subject;var currentTiming=new Date();var timing=lastTiming[subject];var difference=timing&&(0,_moment2.default)(currentTiming).diff((0,_moment2.default)(timing),"minutes");if(!timing||difference>30){lastTiming[subject]=currentTiming;var os=require("os");var options={};options.to=recepients;options.from="developer@daffodilsw.com";options.subject=subject+" - "+__dirname;options.html="\n       <p> Error: "+error.message+" </p></br>\n       <p> Directory: "+__dirname+" </p></br>\n       <p> Host: "+os.hostname()+" </p></br>\n       <p> Date: "+currentTiming+" </p></br>\n       <p> Stack: "+error.stack+" </p></br>  \n    ";return dbConnect&&dbConnect((0,_DBConnect.invoke)("_sendMail",options));}else{return;}};