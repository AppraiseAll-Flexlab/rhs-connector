Object.defineProperty(exports,"__esModule",{value:true});exports.sendApplaneMail=undefined;var _this=this;var _Utility=require("./Utility");var rp=require("request-promise");var sendApplaneMail=exports.sendApplaneMail=function sendApplaneMail(_ref){var options=_ref.options,config=_ref.config,args=_ref.args;var _options,from,fromName,to,cc,subject,html,text,attachments,requestOptions;return regeneratorRuntime.async(function sendApplaneMail$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(options){_context.next=3;break;}throw new Error("Mandatory options are missing in send mail.");case 3:if(!(!config||!config.apiKey)){_context.next=5;break;}throw new Error("Applane Mail Server Credentials Not Found");case 5:if(args){_context.next=7;break;}throw new Error("args not found in ApplaneMail server");case 7:_context.next=9;return regeneratorRuntime.awrap((0,_Utility.addAttachmentIfRequired)(options,args));case 9:_options=options,from=_options.from,fromName=_options.fromName,to=_options.to,cc=_options.cc,subject=_options.subject,html=_options.html,text=_options.text,attachments=_options.attachments;options={from:fromName?fromName+" <"+from+">":from,to:to,cc:cc,subject:subject,html:html,text:text,attachments:attachments,apiKey:config.apiKey,url:config.url};requestOptions={method:"POST",uri:"http://daffodilsw.xyz:6145/sendMail",body:options,json:true};_context.next=14;return regeneratorRuntime.awrap(rp(requestOptions));case 14:return _context.abrupt("return",_context.sent);case 17:_context.prev=17;_context.t0=_context["catch"](0);throw _context.t0;case 20:case"end":return _context.stop();}}},null,_this,[[0,17]]);};